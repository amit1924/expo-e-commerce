<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Mongoose Populate Explained | Dark Neon Guide</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <!-- Custom Tailwind Config -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              bgDark: '#0f172a',
              neonBlue: '#38bdf8',
              neonPurple: '#a855f7',
              neonGreen: '#22c55e',
            },
            boxShadow: {
              neon: '0 0 15px rgba(56,189,248,0.6)',
              purple: '0 0 15px rgba(168,85,247,0.6)',
            },
          },
        },
      };
    </script>
  </head>

  <body class="bg-bgDark text-gray-200 font-sans">
    <!-- Header -->
    <header class="text-center py-10">
      <h1
        class="text-4xl font-bold text-neonBlue drop-shadow-[0_0_10px_#38bdf8]"
      >
        <i class="fas fa-database"></i> Mongoose Populate Explained
      </h1>
      <p class="mt-3 text-gray-400">
        Learn <span class="text-neonGreen">find</span>,
        <span class="text-neonPurple">populate</span>, and
        <span class="text-neonBlue">sort</span> like a pro üöÄ
      </p>
    </header>

    <!-- Main Container -->
    <main class="max-w-6xl mx-auto px-6 space-y-10">
      <!-- Original Code -->
      <section class="bg-slate-900 p-6 rounded-xl shadow-neon">
        <h2 class="text-xl font-semibold text-neonGreen mb-4">
          <i class="fas fa-code"></i> Original Code
        </h2>
        <pre class="bg-black text-green-400 p-4 rounded-lg overflow-x-auto">
const orders = await Order.find()
  .populate('user', 'name email')
  .populate('orderItems.product')
  .sort({ createdAt: -1 });
    </pre
        >
      </section>

      <!-- Big Picture -->
      <section class="bg-slate-900 p-6 rounded-xl shadow-purple">
        <h2 class="text-xl font-semibold text-neonPurple mb-3">
          <i class="fas fa-brain"></i> Big Picture
        </h2>
        <p class="text-gray-300 leading-relaxed">
          This query fetches <span class="text-neonBlue">all orders</span>,
          replaces referenced IDs with real
          <span class="text-neonGreen">user</span> and
          <span class="text-neonPurple">product</span> data, and sorts them so
          the <strong>newest orders appear first</strong>.
        </p>
      </section>

      <!-- Step 1 -->
      <section class="bg-slate-900 p-6 rounded-xl shadow-neon">
        <h2 class="text-lg font-semibold text-neonBlue mb-3">
          <i class="fas fa-box"></i> Step 1: Order.find()
        </h2>
        <p class="mb-3">
          Fetches all orders from the database. Initially, it only returns IDs.
        </p>
        <pre class="bg-black p-4 rounded-lg text-gray-300">
{
  "_id": "order1",
  "user": "user123",
  "orderItems": [
    { "product": "prodA", "qty": 2 }
  ]
}
    </pre
        >
      </section>

      <!-- Step 2 -->
      <section class="bg-slate-900 p-6 rounded-xl shadow-purple">
        <h2 class="text-lg font-semibold text-neonGreen mb-3">
          <i class="fas fa-user"></i> Step 2: populate('user', 'name email')
        </h2>
        <p class="mb-3">
          Replaces the user ID with real user details (only name & email).
        </p>
        <pre class="bg-black p-4 rounded-lg text-gray-300">
"user": {
  "name": "Rahul Kumar",
  "email": "rahul@gmail.com"
}
    </pre
        >
        <p class="mt-2 text-sm text-gray-400">
          üîê Password is excluded for security.
        </p>
      </section>

      <!-- Step 3 -->
      <section class="bg-slate-900 p-6 rounded-xl shadow-neon">
        <h2 class="text-lg font-semibold text-neonPurple mb-3">
          <i class="fas fa-shopping-cart"></i> Step 3:
          populate('orderItems.product')
        </h2>
        <p class="mb-3">Populates product details inside each order item.</p>
        <pre class="bg-black p-4 rounded-lg text-gray-300">
"orderItems": [
  {
    "product": {
      "name": "iPhone 15",
      "price": 80000
    },
    "qty": 2
  }
]
    </pre
        >
      </section>

      <!-- Step 4 -->
      <section class="bg-slate-900 p-6 rounded-xl shadow-purple">
        <h2 class="text-lg font-semibold text-neonBlue mb-3">
          <i class="fas fa-clock"></i> Step 4: sort({ createdAt: -1 })
        </h2>
        <p>
          Orders are sorted so the
          <strong class="text-neonGreen">latest orders</strong>
          appear first.
        </p>

        <ul class="mt-3 list-disc list-inside text-gray-300">
          <li><code class="text-neonBlue">1</code> ‚Üí Oldest first</li>
          <li><code class="text-neonBlue">-1</code> ‚Üí Newest first</li>
        </ul>
      </section>

      <!-- Final Output -->
      <section class="bg-slate-900 p-6 rounded-xl shadow-neon">
        <h2 class="text-xl font-semibold text-neonGreen mb-3">
          <i class="fas fa-check-circle"></i> Final Output
        </h2>
        <pre class="bg-black p-4 rounded-lg text-gray-300 overflow-x-auto">
[
  {
    "user": { "name": "Rahul Kumar", "email": "rahul@gmail.com" },
    "orderItems": [
      { "product": { "name": "iPhone 15", "price": 80000 }, "qty": 2 }
    ],
    "createdAt": "2025-12-18"
  }
]
    </pre
        >
      </section>
    </main>

    <!-- Footer -->
    <footer class="text-center py-8 text-gray-500">
      Built with ‚ù§Ô∏è using Tailwind CSS & Mongoose Concepts
    </footer>
  </body>
</html>
